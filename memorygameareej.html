<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Memory Game by Areej</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* ========== RESET ========== */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --bg-main: radial-gradient(circle at top, #3b82f6 0%, #020617 55%, #000 100%);
      --accent-gold: #facc15;
      --accent-cyan: #22d3ee;
      --accent-pink: #f472b6;
      --accent-red: #fb7185;
      --accent-green: #4ade80;
      --text-main: #e5e7eb;
      --text-soft: #9ca3af;
      --panel: rgba(15, 23, 42, 0.9);
      --border-subtle: rgba(148, 163, 184, 0.35);
      --transition-fast: 0.25s ease-out;
      --transition-med: 0.4s ease-in-out;
      --transition-slow: 0.7s ease-in-out;
      --font-main: system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", sans-serif;
    }

    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #020617;
      color: var(--text-main);
      font-family: var(--font-main);
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ========== BACKGROUND STARFIELD ========== */
    body::before,
    body::after {
      content: "";
      position: fixed;
      inset: 0;
      z-index: -2;
      background:
        radial-gradient(circle at 10% 10%, rgba(94, 234, 212, 0.3) 0, transparent 40%),
        radial-gradient(circle at 80% 20%, rgba(248, 250, 252, 0.18) 0, transparent 45%),
        radial-gradient(circle at 50% 80%, rgba(94, 234, 212, 0.16) 0, transparent 40%),
        #020617;
      mix-blend-mode: screen;
      opacity: 0.9;
    }

    body::after {
      background-image:
        radial-gradient(2px 2px at 20% 20%, rgba(248, 250, 252, 0.8), transparent),
        radial-gradient(1.2px 1.2px at 80% 40%, rgba(248, 250, 252, 0.5), transparent),
        radial-gradient(1.5px 1.5px at 65% 75%, rgba(248, 250, 252, 0.7), transparent),
        radial-gradient(1px 1px at 30% 70%, rgba(248, 250, 252, 0.5), transparent);
      animation: starDrift 45s linear infinite alternate;
      opacity: 0.6;
    }

    @keyframes starDrift {
      from { transform: translate3d(0,0,0) scale(1); }
      to   { transform: translate3d(-30px,-40px,0) scale(1.05); }
    }

    /* ========== APP FRAME ========== */
    .app-shell {
      width: 100%;
      max-width: 1280px;
      height: 100vh;
      padding: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .app-frame {
      width: 100%;
      height: 100%;
      border-radius: 26px;
      background: radial-gradient(circle at top, #0b1120 0, #020617 60%, #000 100%);
      border: 1px solid var(--border-subtle);
      overflow: hidden;
      box-shadow: 0 35px 80px rgba(15, 23, 42, 0.9);
      display: flex;
      flex-direction: column;
    }

    .app-inner {
      position: relative;
      flex: 1;
      padding: 20px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    @media (min-width: 900px) {
      .app-inner {
        padding: 28px 32px;
      }
    }

    .hidden {
      display: none !important;
    }

    .screen {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .centered {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    /* ========== BUTTONS ========== */
    .btn {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px 18px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: radial-gradient(circle at top left,
        rgba(56, 189, 248, 0.25),
        rgba(15, 23, 42, 0.94));
      color: var(--text-main);
      font-size: 13px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      cursor: pointer;
      overflow: hidden;
      transition:
        background var(--transition-fast),
        transform var(--transition-fast),
        box-shadow var(--transition-fast),
        border-color var(--transition-fast),
        opacity 0.2s ease-out;
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.9);
    }

    .btn span {
      font-weight: 600;
    }

    .btn::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(120deg,
        rgba(250, 204, 21, 0.7),
        rgba(56, 189, 248, 0.7));
      opacity: 0;
      mix-blend-mode: screen;
      transition: opacity var(--transition-med);
    }

    .btn > * {
      position: relative;
      z-index: 1;
    }

    .btn:hover {
      border-color: rgba(250, 204, 21, 0.9);
      transform: translateY(-1px) scale(1.02);
      box-shadow:
        0 0 22px rgba(94, 234, 212, 0.6),
        0 0 0 1px rgba(15, 23, 42, 0.9);
    }

    .btn:hover::before {
      opacity: 0.55;
    }

    .btn:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.9);
    }

    .btn--ghost {
      background: transparent;
      box-shadow: none;
    }

    .btn--ghost::before {
      display: none;
    }

    .btn--ghost:hover {
      background: rgba(15, 23, 42, 0.85);
      border-color: rgba(148, 163, 184, 0.9);
    }

    .btn--primary {
      border-color: rgba(94, 234, 212, 0.9);
      box-shadow:
        0 0 22px rgba(94, 234, 212, 0.7),
        0 0 0 1px rgba(15, 23, 42, 0.9);
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-top: 16px;
    }

    /* ========== INTRO SCREEN ========== */
    .intro {
      position: relative;
      flex: 1;
      padding: 20px;
    }

    .intro-core {
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      gap: 18px;
    }

    .intro-logo {
      position: relative;
      padding: 10px 28px 16px;
      border-radius: 999px;
      background:
        radial-gradient(circle at top, rgba(56, 189, 248, 0.25), transparent 65%);
      border: 1px solid rgba(148, 163, 184, 0.5);
      box-shadow:
        0 0 24px rgba(56, 189, 248, 0.6),
        0 0 80px rgba(30, 64, 175, 0.6);
    }

    .intro-title-main {
      font-size: 30px;
      font-weight: 800;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      background: linear-gradient(120deg,
        #e5e7eb,
        #facc15,
        #22d3ee,
        #f472b6);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow:
        0 0 14px rgba(250, 204, 21, 0.75),
        0 0 28px rgba(56, 189, 248, 0.9);
      animation: logoGlow 3.5s ease-in-out infinite alternate;
      white-space: nowrap;
    }

    @keyframes logoGlow {
      from {
        text-shadow:
          0 0 6px rgba(250, 204, 21, 0.6),
          0 0 14px rgba(56, 189, 248, 0.7);
        transform: translateY(0);
      }
      to {
        text-shadow:
          0 0 18px rgba(250, 204, 21, 0.9),
          0 0 34px rgba(56, 189, 248, 0.95);
        transform: translateY(-2px);
      }
    }

    .intro-sub {
      font-size: 12px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--text-soft);
    }

    .intro-tagline {
      max-width: 480px;
      font-size: 14px;
      color: var(--text-soft);
    }

    .sparkles-layer {
      position: absolute;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
    }

    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: radial-gradient(circle, #e5e7eb 0, transparent 75%);
      opacity: 0;
      animation: sparkleFloat 4s linear infinite;
    }

    .sparkle:nth-child(1) { top: 20%; left: 28%; animation-delay: 0.2s; }
    .sparkle:nth-child(2) { top: 35%; left: 70%; animation-delay: 1s; }
    .sparkle:nth-child(3) { top: 55%; left: 15%; animation-delay: 1.8s; }
    .sparkle:nth-child(4) { top: 72%; left: 80%; animation-delay: 2.4s; }
    .sparkle:nth-child(5) { top: 15%; left: 53%; animation-delay: 3.1s; }

    @keyframes sparkleFloat {
      0%   { opacity: 0; transform: translate3d(0, 4px, 0) scale(0.6); }
      20%  { opacity: 1; transform: translate3d(2px, -4px, 0) scale(0.9); }
      60%  { opacity: 1; transform: translate3d(-2px, -10px, 0) scale(1); }
      100% { opacity: 0; transform: translate3d(0, -18px, 0) scale(0.8); }
    }

    .intro-loading {
      margin-top: 20px;
      width: min(380px, 100%);
      text-align: left;
    }

    .loading-label {
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--text-soft);
      margin-bottom: 6px;
      display: flex;
      justify-content: space-between;
    }

    .loading-bar-shell {
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.6);
      overflow: hidden;
    }

    .loading-bar-fill {
      width: 0%;
      height: 100%;
      border-radius: 999px;
      background: linear-gradient(90deg,
        #22d3ee,
        #facc15,
        #f472b6,
        #22d3ee);
      background-size: 200% 100%;
      animation:
        loadingFill 5s ease-out forwards,
        loadingShift 2s linear infinite;
    }

    @keyframes loadingFill {
      from { width: 0%; }
      to   { width: 100%; }
    }

    @keyframes loadingShift {
      from { background-position: 0% 0; }
      to   { background-position: 200% 0; }
    }

    .press-any-key {
      margin-top: 24px;
      font-size: 12px;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--text-soft);
      opacity: 0;
      animation: pressPulse 1.3s ease-in-out infinite alternate;
    }

    .press-any-key.visible {
      opacity: 1;
    }

    @keyframes pressPulse {
      from { transform: translateY(0);   opacity: 0.4; }
      to   { transform: translateY(-2px); opacity: 1; }
    }

    /* ========== MAIN MENU ========== */
    .menu-shell {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .menu-header {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: center;
      margin-bottom: 10px;
    }

    .menu-title-block {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .menu-title-main {
      font-size: 16px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }

    .menu-title-sub {
      font-size: 12px;
      color: var(--text-soft);
    }

    .menu-pill {
      font-size: 10px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--accent-cyan);
      background: rgba(15, 23, 42, 0.8);
    }

    .menu-layout {
      flex: 1;
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.1fr);
      gap: 18px;
    }

    @media (max-width: 860px) {
      .menu-layout {
        grid-template-columns: 1fr;
      }
    }

    .menu-panel {
      border-radius: 20px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.3);
      padding: 16px 18px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    .panel-title {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.15em;
    }

    .panel-subtitle {
      font-size: 12px;
      color: var(--text-soft);
    }

    .menu-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .menu-item-btn {
      width: 100%;
      justify-content: space-between;
      padding: 10px 14px;
      font-size: 13px;
    }

    .menu-item-label {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .menu-item-note {
      font-size: 11px;
      color: var(--text-soft);
    }

    .chip {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      text-transform: uppercase;
      letter-spacing: 0.16em;
    }

    .chip--green {
      border-color: rgba(74, 222, 128, 0.8);
      color: var(--accent-green);
    }

    .chip--pink {
      border-color: rgba(244, 114, 182, 0.8);
      color: var(--accent-pink);
    }

    .chip--cyan {
      border-color: rgba(56, 189, 248, 0.8);
      color: var(--accent-cyan);
    }

    /* ========== ABOUT PANEL CONTENT ========== */
    .about-text {
      font-size: 13px;
      color: var(--text-soft);
      line-height: 1.5;
    }

    .about-list {
      margin-top: 6px;
      font-size: 12px;
      color: var(--text-soft);
    }

    .about-list li {
      margin-left: 16px;
      margin-top: 3px;
    }

    /* ========== DIFFICULTY & AVATAR PANELS ========== */
    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 6px;
    }

    .pill-option {
      cursor: pointer;
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: var(--text-soft);
      background: rgba(15, 23, 42, 0.95);
      text-transform: uppercase;
      letter-spacing: 0.16em;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .pill-option span {
      font-weight: 600;
    }

    .pill-option.active {
      border-color: rgba(94, 234, 212, 0.9);
      color: #e5e7eb;
      background: radial-gradient(circle at top left,
        rgba(56, 189, 248, 0.25),
        rgba(15, 23, 42, 0.98));
      box-shadow: 0 0 16px rgba(56, 189, 248, 0.6);
    }

    .avatar-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 8px;
      margin-top: 8px;
    }

    .avatar-card {
      border-radius: 14px;
      padding: 10px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.45);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      transition:
        transform var(--transition-fast),
        box-shadow var(--transition-fast),
        border-color var(--transition-fast),
        background var(--transition-fast);
    }

    .avatar-card-icon {
      font-size: 20px;
    }

    .avatar-card-main {
      display: flex;
      flex-direction: column;
    }

    .avatar-name {
      font-weight: 600;
    }

    .avatar-role {
      font-size: 11px;
      color: var(--text-soft);
    }

    .avatar-card.active {
      border-color: rgba(250, 204, 21, 0.9);
      box-shadow: 0 0 18px rgba(250, 204, 21, 0.7);
      transform: translateY(-1px);
      background: radial-gradient(circle at top,
        rgba(250, 204, 21, 0.2),
        rgba(15, 23, 42, 0.98));
    }

    /* ========== GAME SCREEN ========== */
    .game-shell {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .game-topbar {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: center;
      font-size: 12px;
    }

    .breadcrumbs {
      display: flex;
      align-items: center;
      gap: 6px;
      color: var(--text-soft);
      text-transform: uppercase;
      letter-spacing: 0.16em;
      font-size: 11px;
    }

    .breadcrumbs strong {
      color: #e5e7eb;
    }

    .badge {
      border-radius: 999px;
      padding: 4px 10px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      font-size: 10px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
    }

    .badge--green {
      border-color: rgba(74, 222, 128, 0.85);
      color: var(--accent-green);
    }

    .badge--red {
      border-color: rgba(248, 113, 113, 0.85);
      color: var(--accent-red);
    }

    .badge--cyan {
      border-color: rgba(56, 189, 248, 0.85);
      color: var(--accent-cyan);
    }

    .game-layout {
      flex: 1;
      display: grid;
      grid-template-columns: minmax(0, 1.5fr) minmax(0, 0.9fr);
      gap: 14px;
    }

    @media (max-width: 860px) {
      .game-layout {
        grid-template-columns: 1fr;
      }
    }

    .board-panel {
      border-radius: 20px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: 0 26px 60px rgba(15, 23, 42, 0.9);
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .board-grid {
      flex: 1;
      display: grid;
      gap: 8px;
      justify-content: center;
      align-content: center;
      padding: 6px;
    }

    .game-sidebar {
      border-radius: 20px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.3);
      padding: 10px 14px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      font-size: 13px;
    }

    .stat-row {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: var(--text-soft);
    }

    .stat-row span strong {
      color: #e5e7eb;
    }

    .divider {
      height: 1px;
      border-radius: 999px;
      background: linear-gradient(90deg,
        transparent,
        rgba(148, 163, 184, 0.5),
        transparent);
      margin: 6px 0;
    }

    .legend-list {
      font-size: 12px;
      color: var(--text-soft);
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .legend-dot {
      width: 12px;
      height: 12px;
      border-radius: 999px;
    }

    .legend-dot--trap {
      background: radial-gradient(circle, #fb7185 0, transparent 70%);
    }

    .legend-dot--power {
      background: radial-gradient(circle, #4ade80 0, transparent 70%);
    }

    .legend-dot--void {
      background: radial-gradient(circle, #64748b 0, transparent 70%);
    }

    /* ========== CARD ========== */
    .card {
      position: relative;
      width: 70px;
      height: 90px;
      border-radius: 14px;
      perspective: 900px;
      cursor: pointer;
    }

    @media (min-width: 1000px) {
      .card {
        width: 76px;
        height: 100px;
      }
    }

    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 0.36s ease-out;
    }

    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }

    .card-face {
      position: absolute;
      inset: 0;
      border-radius: 14px;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      border: 1px solid rgba(148, 163, 184, 0.5);
    }

    .card-back {
      background: radial-gradient(circle at top,
        rgba(56, 189, 248, 0.35),
        #020617 75%);
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.9),
        0 14px 26px rgba(15, 23, 42, 0.9);
    }

    .card-front {
      background: radial-gradient(circle at top,
        rgba(15, 23, 42, 0.98),
        #020617 80%);
      transform: rotateY(180deg);
      box-shadow:
        0 0 0 1px rgba(15, 23, 42, 0.9),
        0 18px 30px rgba(15, 23, 42, 0.95);
    }

    .card[data-type="trap"] .card-front {
      border-color: rgba(248, 113, 113, 0.9);
      box-shadow: 0 0 18px rgba(248, 113, 113, 0.7);
    }

    .card[data-type="power"] .card-front {
      border-color: rgba(74, 222, 128, 0.9);
      box-shadow: 0 0 18px rgba(74, 222, 128, 0.7);
    }

    .card[data-type="void"] .card-front {
      border-color: rgba(148, 163, 184, 0.9);
      box-shadow: 0 0 14px rgba(148, 163, 184, 0.6);
      opacity: 0.85;
    }

    .card.matched {
      cursor: default;
      transform: scale(0.96);
      opacity: 0.7;
    }

    /* ========== RESULT / WIN SCREEN ========== */
    .overlay-screen {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at center,
        rgba(15, 23, 42, 0.98),
        rgba(15, 23, 42, 0.98));
      backdrop-filter: blur(8px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20;
    }

    .result-panel {
      width: min(420px, 100%);
      border-radius: 22px;
      background: rgba(15, 23, 42, 0.98);
      border: 1px solid rgba(148, 163, 184, 0.6);
      box-shadow: 0 28px 70px rgba(15, 23, 42, 0.95);
      padding: 18px 20px 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      text-align: center;
      animation: panelPop 0.35s ease-out;
    }

    @keyframes panelPop {
      from { transform: translateY(8px) scale(0.96); opacity: 0; }
      to   { transform: translateY(0)    scale(1);    opacity: 1; }
    }

    .result-title {
      font-size: 18px;
      letter-spacing: 0.16em;
      text-transform: uppercase;
    }

    .result-sub {
      font-size: 13px;
      color: var(--text-soft);
    }

    .result-stats {
      margin-top: 4px;
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
      font-size: 12px;
    }

    .stat-tile {
      border-radius: 14px;
      padding: 8px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.5);
    }

    .stat-label {
      font-size: 11px;
      color: var(--text-soft);
    }

    .stat-value {
      font-size: 15px;
      margin-top: 3px;
    }

    .result-buttons {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
    }

    /* ========== SIMPLE FADE HELPERS ========== */
    .fade-in {
      animation: fadeIn 0.5s ease-out forwards;
    }

    .fade-out {
      animation: fadeOut 0.4s ease-in forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(6px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeOut {
      from { opacity: 1; transform: translateY(0); }
      to   { opacity: 0; transform: translateY(-4px); }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <div class="app-frame">
      <div class="app-inner">

        <!-- INTRO / CINEMATIC SCREEN -->
        <section id="screen-intro" class="screen intro">
          <div class="sparkles-layer">
            <div class="sparkle"></div>
            <div class="sparkle"></div>
            <div class="sparkle"></div>
            <div class="sparkle"></div>
            <div class="sparkle"></div>
          </div>
          <div class="intro-core">
            <div class="intro-logo">
              <div class="intro-title-main">MEMORY GAME</div>
              <div class="intro-sub">by Areej ¬∑ celestial edition</div>
            </div>
            <p class="intro-tagline">
              Match the stars, dodge the traps, and bend reality with power cards
              in a polished celestial memory challenge.
            </p>

            <div class="intro-loading">
              <div class="loading-label">
                <span>Initialising starfield</span>
                <span id="intro-progress-label">0%</span>
              </div>
              <div class="loading-bar-shell">
                <div class="loading-bar-fill" id="intro-progress-bar"></div>
              </div>
            </div>

            <div id="press-any-key" class="press-any-key">
              Press any key or tap to begin ‚ú®
            </div>
          </div>
        </section>

        <!-- MAIN MENU SCREEN -->
        <section id="screen-menu" class="screen hidden">
          <div class="menu-shell">
            <div class="menu-header">
              <div class="menu-title-block">
                <div class="menu-title-main">MEMORY GAME BY AREEJ üß†</div>
                <div class="menu-title-sub">
                  Cinematic celestial memory challenge ¬∑ traps ¬∑ power cards ¬∑ void tiles
                </div>
              </div>
              <div class="menu-pill">Studio-grade prototype ¬∑ v1.0</div>
            </div>

            <div class="menu-layout">
              <!-- Left: Main menu actions -->
              <div class="menu-panel">
                <div class="panel-header">
                  <div>
                    <div class="panel-title">Game menu</div>
                    <div class="panel-subtitle">
                      Choose your experience and dive into the grid.
                    </div>
                  </div>
                  <div class="chip chip--cyan">Core</div>
                </div>

                <div class="menu-list">
                  <button class="btn menu-item-btn btn--primary" id="btn-menu-start">
                    <div class="menu-item-label">
                      <span>‚ñ∂Ô∏è Start Game</span>
                    </div>
                    <div class="menu-item-note">Begin memory challenge</div>
                  </button>

                  <button class="btn menu-item-btn" id="btn-menu-about">
                    <div class="menu-item-label">
                      <span>üìò About the Game</span>
                    </div>
                    <div class="menu-item-note">How it works and what‚Äôs special</div>
                  </button>

                  <button class="btn menu-item-btn" id="btn-menu-avatars">
                    <div class="menu-item-label">
                      <span>üëæ Player Avatars</span>
                    </div>
                    <div class="menu-item-note">2‚Äì4 player styles & roles</div>
                  </button>

                  <button class="btn menu-item-btn" id="btn-menu-exit">
                    <div class="menu-item-label">
                      <span>‚ùå Exit to Intro</span>
                    </div>
                    <div class="menu-item-note">Replay cinematic intro</div>
                  </button>
                </div>
              </div>

              <!-- Right: About + difficulty + avatar summary -->
              <div class="menu-panel">
                <div class="panel-header">
                  <div>
                    <div class="panel-title">About & setup</div>
                    <div class="panel-subtitle">
                      Tune difficulty, avatars and learn the rules.
                    </div>
                  </div>
                  <div class="chip chip--pink">Profile</div>
                </div>

                <!-- About text -->
                <div id="about-block">
                  <p class="about-text">
                    <strong>Memory Game by Areej</strong> is a polished, celestial-themed
                    memory puzzle. Match pairs to score, but watch out:
                    trap cards subtract points, power cards boost you, and
                    void tiles fill the board without matching.
                  </p>
                  <ul class="about-list">
                    <li>Multiple difficulty levels from calm to chaotic üí•</li>
                    <li>Traps üîª, power cards ‚ö°, and void cards üåÄ</li>
                    <li>Scoreboard, timer and cinematic win screen</li>
                    <li>2‚Äì4 player avatars for shared play ü§ñüê±‚Äçüíªü¶äüêâ</li>
                  </ul>
                </div>

                <!-- Difficulty selection -->
                <div style="margin-top: 10px;">
                  <div class="panel-title" style="font-size: 11px;">Difficulty</div>
                  <div class="pill-row" id="difficulty-row">
                    <div class="pill-option active" data-difficulty="easy">
                      üå± <span>Easy</span>
                    </div>
                    <div class="pill-option" data-difficulty="intermediate">
                      ‚≠ê <span>Intermediate</span>
                    </div>
                    <div class="pill-option" data-difficulty="hard">
                      üî• <span>Hard</span>
                    </div>
                    <div class="pill-option" data-difficulty="heart">
                      üíñ‚ö° <span>Heart Mode</span>
                    </div>
                  </div>
                </div>

                <!-- Avatar quick choose -->
                <div style="margin-top: 10px;">
                  <div class="panel-title" style="font-size: 11px;">Players</div>
                  <div class="pill-row" id="players-row">
                    <div class="pill-option active" data-players="1">
                      üë§ <span>Solo</span>
                    </div>
                    <div class="pill-option" data-players="2">
                      üë• <span>2 Players</span>
                    </div>
                    <div class="pill-option" data-players="3">
                      üë• <span>3 Players</span>
                    </div>
                    <div class="pill-option" data-players="4">
                      üë• <span>4 Players</span>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </section>

        <!-- AVATAR SELECTION SCREEN -->
        <section id="screen-avatars" class="screen hidden">
          <div class="menu-shell">
            <div class="menu-header">
              <div class="menu-title-block">
                <div class="menu-title-main">Player avatars üëæ</div>
                <div class="menu-title-sub">
                  Choose identities for 2‚Äì4 players ¬∑ Robo‚ÄëCoder, Ninja‚ÄëProgrammer, Fox‚ÄëDebugger, Dragon‚ÄëHacker
                </div>
              </div>
              <button class="btn btn--ghost" id="btn-avatars-back">
                ‚Üê <span>Back</span>
              </button>
            </div>

            <div class="menu-layout">
              <div class="menu-panel">
                <div class="panel-header">
                  <div>
                    <div class="panel-title">Avatar roster</div>
                    <div class="panel-subtitle">
                      Tap to select your favourite cyber persona.
                    </div>
                  </div>
                  <div class="chip chip--green">Visual</div>
                </div>

                <div class="avatar-grid" id="avatar-grid">
                  <!-- Avatars populated by JS -->
                </div>
              </div>

              <div class="menu-panel">
                <div class="panel-header">
                  <div>
                    <div class="panel-title">How avatars work</div>
                    <div class="panel-subtitle">
                      Purely cosmetic, but full of personality.
                    </div>
                  </div>
                  <div class="chip chip--cyan">Info</div>
                </div>
                <p class="about-text">
                  Each avatar represents a different coding archetype:
                </p>
                <ul class="about-list">
                  <li>ü§ñ <strong>Robo‚ÄëCoder</strong>: precise, analytical, efficient</li>
                  <li>üê±‚Äçüíª <strong>Ninja‚ÄëProgrammer</strong>: stealthy, fast, sharp</li>
                  <li>ü¶ä <strong>Fox‚ÄëDebugger</strong>: clever, curious, problem‚Äësolver</li>
                  <li>üêâ <strong>Dragon‚ÄëHacker</strong>: powerful, chaotic, unstoppable</li>
                </ul>
                <p class="about-text" style="margin-top: 6px;">
                  Avatars can be assigned per player when you extend this prototype
                  into a full multiplayer experience.
                </p>
              </div>
            </div>
          </div>
        </section>

        <!-- GAME SCREEN -->
        <section id="screen-game" class="screen hidden">
          <div class="game-shell">
            <div class="game-topbar">
              <div class="breadcrumbs">
                <span>Memory Game by Areej</span>
                <span>¬∑</span>
                <span>Mode: <strong id="crumb-difficulty">Easy</strong></span>
                <span>¬∑</span>
                <span>Players: <strong id="crumb-players">Solo</strong></span>
              </div>
              <div style="display:flex; gap:8px;">
                <button class="btn btn--ghost" id="btn-game-menu">
                  üè† <span>Menu</span>
                </button>
                <button class="btn" id="btn-game-restart">
                  üîÅ <span>Restart()</span>
                </button>
              </div>
            </div>

            <div class="game-layout">
              <!-- Board -->
              <div class="board-panel">
                <div class="stat-row" style="margin-bottom:4px;">
                  <span>Board ¬∑ <span id="board-label">4 √ó 4</span></span>
                  <span class="badge badge--cyan">Live round</span>
                </div>
                <div class="board-grid" id="board-grid">
                  <!-- Cards injected by JS -->
                </div>
              </div>

              <!-- Sidebar -->
              <aside class="game-sidebar">
                <div class="stat-row">
                  <span>Score</span>
                  <span><strong id="stat-score">0</strong> pts</span>
                </div>
                <div class="stat-row">
                  <span>Moves</span>
                  <span><strong id="stat-moves">0</strong></span>
                </div>
                <div class="stat-row">
                  <span>Time</span>
                  <span><strong id="stat-time">0</strong> s</span>
                </div>
                <div class="divider"></div>
                <div class="stat-row">
                  <span>Combo</span>
                  <span><strong id="stat-combo">x1</strong></span>
                </div>
                <div class="stat-row">
                  <span>Matches</span>
                  <span><strong id="stat-matches">0</strong></span>
                </div>

                <div class="divider"></div>
                <div>
                  <div class="panel-title" style="font-size: 11px;">Card types</div>
                  <div class="legend-list" style="margin-top:4px;">
                    <div class="legend-item">
                      <div class="legend-dot legend-dot--power"></div>
                      <span>Power card ‚ö° ‚Äî bonus points when matched</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot legend-dot--trap"></div>
                      <span>Trap card üîª ‚Äî subtracts points on match</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-dot legend-dot--void"></div>
                      <span>Void card üåÄ ‚Äî visible tile, cannot be matched</span>
                    </div>
                  </div>
                </div>

                <div class="divider"></div>
                <div>
                  <div class="panel-title" style="font-size: 11px;">Controls</div>
                  <p class="about-text" style="margin-top:4px;">
                    Tap or click a card to flip. Match pairs to score. Matching power cards
                    accelerates your point gain, while trap cards will bite into your total.
                    Heart Mode activates more traps, powers and void tiles for maximum chaos.
                  </p>
                </div>
              </aside>
            </div>
          </div>
        </section>

        <!-- RESULT / WIN OVERLAY -->
        <div id="screen-result" class="overlay-screen hidden">
          <div class="result-panel">
            <div class="result-title">Round complete üöÄ</div>
            <div class="result-sub" id="result-message">
              You cleared the board ‚Äî stellar memory!
            </div>

            <div class="result-stats">
              <div class="stat-tile">
                <div class="stat-label">Score</div>
                <div class="stat-value" id="result-score">0</div>
              </div>
              <div class="stat-tile">
                <div class="stat-label">Moves</div>
                <div class="stat-value" id="result-moves">0</div>
              </div>
              <div class="stat-tile">
                <div class="stat-label">Time</div>
                <div class="stat-value" id="result-time">0s</div>
              </div>
            </div>

            <div class="result-buttons">
              <button class="btn btn--primary" id="btn-result-next">
                üöÄ <span>Next Level</span>
              </button>
              <button class="btn" id="btn-result-restart">
                üîÅ <span>Restart</span>
              </button>
              <button class="btn btn--ghost" id="btn-result-menu">
                üè† <span>Menu</span>
              </button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script>
    // ========== STATE ==========
    const state = {
      difficulty: "easy",
      players: 1,
      avatars: [
        { id: "robo", icon: "ü§ñ", name: "Robo‚ÄëCoder", role: "Precise, analytical architect" },
        { id: "ninja", icon: "üê±‚Äçüíª", name: "Ninja‚ÄëProgrammer", role: "Stealthy, fast executor" },
        { id: "fox", icon: "ü¶ä", name: "Fox‚ÄëDebugger", role: "Curious, clever problem‚Äësolver" },
        { id: "dragon", icon: "üêâ", name: "Dragon‚ÄëHacker", role: "Chaotic, unstoppable power" },
      ],
      selectedAvatarId: "robo",

      // Game runtime
      cards: [],
      flippedIndices: [],
      matchedCount: 0,
      score: 0,
      moves: 0,
      combo: 1,
      timer: 0,
      timerId: null,
      lockBoard: false
    };

    // Difficulty config
    const DIFFICULTIES = {
      easy: {
        label: "Easy",
        rows: 4,
        cols: 4,
        traps: 1,
        powers: 1,
        voids: 2
      },
      intermediate: {
        label: "Intermediate",
        rows: 4,
        cols: 5,
        traps: 2,
        powers: 2,
        voids: 3
      },
      hard: {
        label: "Hard",
        rows: 5,
        cols: 6,
        traps: 3,
        powers: 3,
        voids: 4
      },
      heart: {
        label: "Heart Mode",
        rows: 6,
        cols: 6,
        traps: 5,
        powers: 5,
        voids: 6
      }
    };

    const BASE_SYMBOLS = ["üåô","‚≠ê","‚òÑÔ∏è","ü™ê","üåå","üí´","üî≠","üß†","‚öôÔ∏è","üíª","üëæ","üõ∞Ô∏è","üåü","ü™Ñ","üì¶","üß©"];

    // ========== DOM HELPERS ==========
    const $ = (id) => document.getElementById(id);

    const screenIntro = $("screen-intro");
    const screenMenu = $("screen-menu");
    const screenAvatars = $("screen-avatars");
    const screenGame = $("screen-game");
    const screenResult = $("screen-result");

    const introProgressLabel = $("intro-progress-label");
    const introProgressBar = $("intro-progress-bar");
    const pressAnyKey = $("press-any-key");

    const difficultyRow = $("difficulty-row");
    const playersRow = $("players-row");
    const avatarGrid = $("avatar-grid");

    const boardGrid = $("board-grid");
    const boardLabel = $("board-label");

    const statScore = $("stat-score");
    const statMoves = $("stat-moves");
    const statTime = $("stat-time");
    const statCombo = $("stat-combo");
    const statMatches = $("stat-matches");

    const crumbDifficulty = $("crumb-difficulty");
    const crumbPlayers = $("crumb-players");

    const resultScore = $("result-score");
    const resultMoves = $("result-moves");
    const resultTime = $("result-time");
    const resultMessage = $("result-message");

    // ========== INTRO LOGIC ==========
    let introReady = false;

    function simulateIntroProgress() {
      let progress = 0;
      const interval = setInterval(() => {
        progress += 4 + Math.random() * 6;
        if (progress >= 100) {
          progress = 100;
          clearInterval(interval);
          introReady = true;
          pressAnyKey.classList.add("visible");
          introProgressLabel.textContent = "100%";
        } else {
          introProgressLabel.textContent = Math.round(progress) + "%";
        }
      }, 220);
    }

    function gotoMenu() {
      screenIntro.classList.add("hidden");
      screenAvatars.classList.add("hidden");
      screenGame.classList.add("hidden");
      screenResult.classList.add("hidden");
      screenMenu.classList.remove("hidden");
    }

    function gotoIntro() {
      screenMenu.classList.add("hidden");
      screenAvatars.classList.add("hidden");
      screenGame.classList.add("hidden");
      screenResult.classList.add("hidden");
      screenIntro.classList.remove("hidden");
      introReady = false;
      pressAnyKey.classList.remove("visible");
      introProgressLabel.textContent = "0%";
      // restart bar animation
      introProgressBar.style.animation = "none";
      // Force reflow
      void introProgressBar.offsetWidth;
      introProgressBar.style.animation =
        "loadingFill 5s ease-out forwards, loadingShift 2s linear infinite";
      simulateIntroProgress();
    }

    function gotoAvatars() {
      screenMenu.classList.add("hidden");
      screenAvatars.classList.remove("hidden");
    }

    function gotoGame() {
      screenMenu.classList.add("hidden");
      screenAvatars.classList.add("hidden");
      screenResult.classList.add("hidden");
      screenGame.classList.remove("hidden");
      startNewGame();
    }

    function showResultOverlay() {
      screenResult.classList.remove("hidden");
      screenResult.classList.add("fade-in");
      resultScore.textContent = state.score;
      resultMoves.textContent = state.moves;
      resultTime.textContent = state.timer + "s";

      if (state.moves <= (state.cards.length / 2) + 4) {
        resultMessage.textContent = "Sharp memory, blazing moves. Studio‚Äëlevel performance. üî•";
      } else if (state.timer < 60) {
        resultMessage.textContent = "You found your rhythm among the stars. ‚ú®";
      } else {
        resultMessage.textContent = "You persisted through the cosmic chaos. Respect. üåå";
      }
    }

    // ========== MENU INTERACTIONS ==========
    document.addEventListener("keydown", () => {
      if (screenIntro && !screenIntro.classList.contains("hidden") && introReady) {
        gotoMenu();
      }
    });
    document.addEventListener("click", () => {
      if (screenIntro && !screenIntro.classList.contains("hidden") && introReady) {
        gotoMenu();
      }
    });

    $("btn-menu-start").addEventListener("click", gotoGame);
    $("btn-menu-about").addEventListener("click", () => {
      alert(
        "Memory Game by Areej ¬∑\n\n" +
        "Match pairs, avoid trap cards, and enjoy power cards that boost your score.\n" +
        "Void tiles fill the board without matching, especially in Heart Mode."
      );
    });
    $("btn-menu-avatars").addEventListener("click", gotoAvatars);
    $("btn-menu-exit").addEventListener("click", gotoIntro);

    $("btn-avatars-back").addEventListener("click", gotoMenu);

    $("btn-game-menu").addEventListener("click", () => {
      stopTimer();
      gotoMenu();
    });
    $("btn-game-restart").addEventListener("click", () => {
      startNewGame();
    });

    $("btn-result-next").addEventListener("click", () => {
      // simple: just restart same difficulty but you can imagine next level logic
      screenResult.classList.add("hidden");
      startNewGame();
    });
    $("btn-result-restart").addEventListener("click", () => {
      screenResult.classList.add("hidden");
      startNewGame();
    });
    $("btn-result-menu").addEventListener("click", () => {
      stopTimer();
      screenResult.classList.add("hidden");
      gotoMenu();
    });

    // difficulty selection
    difficultyRow.addEventListener("click", (e) => {
      const pill = e.target.closest(".pill-option");
      if (!pill) return;
      const diff = pill.dataset.difficulty;
      if (!diff) return;

      document
        .querySelectorAll("#difficulty-row .pill-option")
        .forEach(el => el.classList.remove("active"));
      pill.classList.add("active");
      state.difficulty = diff;
    });

    // players selection
    playersRow.addEventListener("click", (e) => {
      const pill = e.target.closest(".pill-option");
      if (!pill) return;
      const count = parseInt(pill.dataset.players, 10);
      if (!count) return;

      document
        .querySelectorAll("#players-row .pill-option")
        .forEach(el => el.classList.remove("active"));
      pill.classList.add("active");
      state.players = count;
    });

    // ========== AVATAR SETUP ==========
    function renderAvatars() {
      avatarGrid.innerHTML = "";
      state.avatars.forEach((avatar) => {
        const card = document.createElement("div");
        card.className = "avatar-card";
        card.dataset.avatarId = avatar.id;
        if (avatar.id === state.selectedAvatarId) {
          card.classList.add("active");
        }

        card.innerHTML = `
          <div class="avatar-card-icon">${avatar.icon}</div>
          <div class="avatar-card-main">
            <div class="avatar-name">${avatar.name}</div>
            <div class="avatar-role">${avatar.role}</div>
          </div>
        `;
        avatarGrid.appendChild(card);
      });
    }

    avatarGrid.addEventListener("click", (e) => {
      const card = e.target.closest(".avatar-card");
      if (!card) return;
      const id = card.dataset.avatarId;
      state.selectedAvatarId = id;
      renderAvatars();
    });

    // ========== GAME LOGIC ==========
    function startTimer() {
      stopTimer();
      state.timer = 0;
      statTime.textContent = "0";
      state.timerId = setInterval(() => {
        state.timer += 1;
        statTime.textContent = state.timer;
      }, 1000);
    }

    function stopTimer() {
      if (state.timerId) {
        clearInterval(state.timerId);
        state.timerId = null;
      }
    }

    function startNewGame() {
      const diffConfig = DIFFICULTIES[state.difficulty];
      const rows = diffConfig.rows;
      const cols = diffConfig.cols;

      // update labels
      boardLabel.textContent = `${rows} √ó ${cols}`;
      crumbDifficulty.textContent = diffConfig.label;
      crumbPlayers.textContent = state.players === 1 ? "Solo" : state.players + " Players";

      // reset state
      state.score = 0;
      state.moves = 0;
      state.combo = 1;
      state.timer = 0;
      state.matchedCount = 0;
      state.flippedIndices = [];
      state.cards = [];
      state.lockBoard = false;

      statScore.textContent = "0";
      statMoves.textContent = "0";
      statCombo.textContent = "x1";
      statMatches.textContent = "0";
      statTime.textContent = "0";

      // build cards
      const totalSlots = rows * cols;
      const maxPairs = Math.floor(totalSlots / 2);

      // choose symbols
      const symbolCount = Math.min(maxPairs, BASE_SYMBOLS.length);
      const symbols = BASE_SYMBOLS.slice(0, symbolCount);

      const cards = [];
      // base normal pairs
      symbols.forEach((sym) => {
        cards.push({ symbol: sym, type: "normal", id: sym + "-a" });
        cards.push({ symbol: sym, type: "normal", id: sym + "-b" });
      });

      // adjust number of cards to fit grid size
      while (cards.length > maxPairs * 2) {
        cards.pop();
      }

      // assign special types by converting some pairs
      applySpecialCards(cards, diffConfig);

      // if still not enough cards for grid, add void cards
      while (cards.length < totalSlots) {
        cards.push({
          symbol: "üåÄ",
          type: "void",
          id: "void-" + cards.length + "-" + Math.random().toString(36).slice(2)
        });
      }

      // shuffle
      shuffle(cards);

      // update state
      state.cards = cards;

      // render board grid
      renderBoard(rows, cols);

      // start timer
      startTimer();
    }

    function applySpecialCards(cards, diffConfig) {
      const pairs = [];
      for (let i = 0; i < cards.length; i += 2) {
        pairs.push([i, i + 1]);
      }

      shuffle(pairs);

      // assign power pairs
      let powerPairs = diffConfig.powers;
      let trapPairs = diffConfig.traps;
      let voidPairs = diffConfig.voids;

      let pairIndex = 0;

      function convertPairToType(type, symbol) {
        if (pairIndex >= pairs.length) return;
        const [i1, i2] = pairs[pairIndex];
        cards[i1].type = type;
        cards[i2].type = type;
        if (symbol) {
          cards[i1].symbol = symbol;
          cards[i2].symbol = symbol;
        }
        pairIndex += 1;
      }

      while (powerPairs-- > 0 && pairIndex < pairs.length) {
        convertPairToType("power", "‚ö°");
      }
      while (trapPairs-- > 0 && pairIndex < pairs.length) {
        convertPairToType("trap", "üîª");
      }
      while (voidPairs-- > 0 && pairIndex < pairs.length) {
        convertPairToType("void", "üåÄ");
      }
    }

    function shuffle(arr) {
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
    }

    function renderBoard(rows, cols) {
      boardGrid.innerHTML = "";
      boardGrid.style.gridTemplateColumns = `repeat(${cols}, minmax(0, 1fr))`;

      state.cards.forEach((card, index) => {
        const el = document.createElement("div");
        el.className = "card";
        el.dataset.index = index;
        el.dataset.type = card.type;
        el.innerHTML = `
          <div class="card-inner">
            <div class="card-face card-back">‚ú®</div>
            <div class="card-face card-front">${card.symbol}</div>
          </div>
        `;
        boardGrid.appendChild(el);
      });

      boardGrid.addEventListener("click", onBoardClick);
    }

    function onBoardClick(e) {
      const cardEl = e.target.closest(".card");
      if (!cardEl) return;
      if (state.lockBoard) return;

      const index = parseInt(cardEl.dataset.index, 10);
      if (isNaN(index)) return;
      const cardData = state.cards[index];

      // ignore void tiles
      if (cardData.type === "void") return;

      // already flipped or matched
      if (cardEl.classList.contains("flipped") || cardEl.classList.contains("matched")) return;

      flipCard(cardEl, index);
    }

    function flipCard(cardEl, index) {
      cardEl.classList.add("flipped");
      state.flippedIndices.push(index);

      if (state.flippedIndices.length === 2) {
        state.lockBoard = true;
        state.moves += 1;
        statMoves.textContent = state.moves;

        const [i1, i2] = state.flippedIndices;
        const c1 = state.cards[i1];
        const c2 = state.cards[i2];

        if (c1.symbol === c2.symbol && c1.type !== "void") {
          // match
          state.combo += 1;
          statCombo.textContent = "x" + state.combo;
          state.matchedCount += 2;
          statMatches.textContent = state.matchedCount / 2;

          let scoreDelta = 100;
          if (c1.type === "power") {
            scoreDelta += 100; // extra for power
          }
          if (c1.type === "trap") {
            scoreDelta -= 70;  // penalty
          }
          scoreDelta = scoreDelta * state.combo;
          state.score += scoreDelta;
          if (state.score < 0) state.score = 0;
          statScore.textContent = state.score;

          setTimeout(() => {
            document.querySelector(`.card[data-index="${i1}"]`).classList.add("matched");
            document.querySelector(`.card[data-index="${i2}"]`).classList.add("matched");
            state.flippedIndices = [];
            state.lockBoard = false;

            if (state.matchedCount === state.cards.filter(c => c.type !== "void").length) {
              stopTimer();
              showResultOverlay();
            }
          }, 350);
        } else {
          // no match
          state.combo = 1;
          statCombo.textContent = "x1";

          setTimeout(() => {
            document.querySelector(`.card[data-index="${i1}"]`).classList.remove("flipped");
            document.querySelector(`.card[data-index="${i2}"]`).classList.remove("flipped");
            state.flippedIndices = [];
            state.lockBoard = false;
          }, 650);
        }
      }
    }

    // ========== INIT ==========
    function init() {
      simulateIntroProgress();
      renderAvatars();
    }

    init();
  </script>
</body>
</html>